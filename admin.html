<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Login Admin</title>
<style>
body {
    background: #001a33;
    color: white;
    font-family: Arial;
    text-align: center;
}
.card {
    margin: 80px auto;
    width: 90%;
    max-width: 350px;
    background: rgba(255,255,255,0.1);
    padding: 25px;
    border-radius: 15px;
}
input {
    width: 100%;
    padding: 12px;
    margin-bottom: 15px;
    border-radius: 10px;
    border: none;
    background: rgba(0,0,0,0.25);
    color: white;
}
button {
    width: 100%;
    padding: 12px;
    background: #00eaff;
    border: none;
    border-radius: 10px;
    font-weight: bold;
    color: black;
    cursor: pointer;
}
</style>
</head>

<body>

<div class="card" id="loginCard">
    <h2>Login Admin</h2>
    <input type="password" id="pw" placeholder="Masukkan Password">
    <button onclick="cek()">Masuk</button>
</div>

<div id="adminPanel" style="display:none;">
    <h2>DATA PENDAFTAR</h2>
    <button onclick="hapusAll()">Hapus Semua Data</button>
    <button onclick="buatBracket()">Buat Bracket</button>
    <button onclick="location.href='bracket.html'">Lihat Bracket</button>

    <table id="tabel" border="1" style="width:100%; margin-top:15px; color:white;"></table>
</div>

<script>
const PASSWORD = "12345"; // ‚Üê ubah di sini bila mau

function cek() {
    if (pw.value === PASSWORD) {
        loginCard.style.display = "none";
        adminPanel.style.display = "block";
        load();
    } else {
        alert("Password salah!");
    }
}

function load() {
    let db = JSON.parse(localStorage.getItem("pendaftaran")) || [];
    let html =
        "<tr><th>No</th><th>Nama</th><th>Kelas</th><th>Jurusan</th><th>Lomba</th></tr>";

    db.forEach((d, i) => {
        html += `<tr>
            <td>${i+1}</td>
            <td>${d.nama}</td>
            <td>${d.kelas}</td>
            <td>${d.jurusan}</td>
            <td>${d.lomba}</td>
        </tr>`;
    });

    tabel.innerHTML = html;
}

function hapusAll() {
    if (confirm("Hapus semua data?")) {
        localStorage.removeItem("pendaftaran");
        load();
    }
}

function buatBracket() {
    let db = JSON.parse(localStorage.getItem("pendaftaran")) || [];

    let group = {};
    db.forEach(d => {
        if (!group[d.lomba]) group[d.lomba] = [];
        group[d.lomba].push(d);
    });

    localStorage.setItem("bracket", JSON.stringify(group));
    alert("Bracket berhasil dibuat!");
}
</script>

</body>
</html>